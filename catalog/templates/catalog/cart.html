{% load static %}
{% load custom_filters %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Cart</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>
<body>
    <div class="cart-container">
        <h1>Your Cart</h1>

        {% if cart_items %}
            {% for item in cart_items %}
                <div class="cart-item">
                    <p><strong>{{ item.product.name }}</strong> — ₦{{ item.product.price }}</p>

                    <form action="{% url 'update_cart' item.product.id %}" method="POST" class="quantity-form">
                        {% csrf_token %}
                        <button type="submit" name="action" value="decrease">-</button>
                        <input type="text" name="quantity" value="{{ item.quantity }}" size="1" readonly>
                        <button type="submit" name="action" value="increase">+</button>
                    </form>

                    <form action="{% url 'remove_from_cart' item.product.id %}" method="POST" class="remove-form">
                        {% csrf_token %}
                        <button type="submit">Remove</button>
                    </form>
                </div>
            {% endfor %}
        {% else %}
            <p>No items in your cart.</p>
        {% endif %}

        {% if total_price %}
            <div class="total-price">Total: ₦{{ total_price }}</div>
            <a href="{% url 'checkout' %}" class="checkout-btn">Proceed to Checkout</a>
        {% endif %}
        
        <a href="{% url 'home' %}" class="continue-btn">← Continue Shopping</a>
    </div>
</body>
</html>
