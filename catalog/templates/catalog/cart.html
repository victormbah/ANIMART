{% load custom_filters %}

<h1>Your Cart</h1>
<ul>
    {% for item in cart.values %}
        <li>
            <h3>{{ item.name }}</h3>
            <p>${{ item.price }} x {{ item.quantity }}</p>
            <p>Total: ${{ item.quantity|multiply:item.price }}</p>

            <form method="get" action="{% url 'update_cart' slug=item.slug %}" style="display: inline-block;">
                <button type="submit" name="action" value="increase">➕</button>
            </form>
            <span>{{ item.quantity }}</span>
            <form method="get" action="{% url 'update_cart' slug=item.slug %}" style="display: inline-block;">
                <button type="submit" name="action" value="decrease" {% if item.quantity <= 1 %}disabled{% endif %}>➖</button>
            </form>

            <a href="{% url 'remove_from_cart' slug=item.slug %}" class="button">Remove</a>
        </li>
    {% empty %}
        <li>No items in your cart.</li>
    {% endfor %}
</ul>
<p><strong>Total: ${{ total_price }}</strong></p>
<a href="{% url 'checkout' %}" class="button">Proceed to Checkout</a>
